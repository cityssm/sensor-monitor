"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e=exports.urlPrefix,t={},s=(e,s)=>{let o=!1;if(s||(s=document.querySelector(`[data-config-key='${e.configKey}']`).querySelector(`[data-sensor-key='${e.sensorKey}']`),o=!0),!s)return;const r=s.querySelector(".sensor-status");(e=>{e.classList.remove("has-text-danger","has-text-warning","has-text-success","has-text-grey")})(r),e.isError?r.classList.add("has-text-warning"):e.sensorText?r.classList.add("has-text-danger"):r.classList.add("has-text-success");for(const t of s.querySelectorAll("[data-field='sensorValue']"))t.textContent=e.sensorValue.toString();for(const t of s.querySelectorAll("[data-field='statusTime']"))t.textContent=new Date(e.statusTimeMillis).toLocaleString();for(const t of s.querySelectorAll("[data-field='sensorValueMin']"))t.textContent=e.sensorValueMin.toString();for(const t of s.querySelectorAll("[data-field='sensorValueMax']"))t.textContent=e.sensorValueMax.toString();for(const t of s.querySelectorAll("[data-field='sensorText']"))t.textContent=e.sensorText;if(o){const s=t[e.configKey][e.sensorKey],o=s.getOption().series[0].data;for(;o.length>1e4;)o.shift();o.push([new Date(e.statusTimeMillis),e.sensorValue]),s.setOption({series:{data:o}})}},o=exports.historicalStatusLogs,r=(e,s,r)=>{const n=o[e][s],a=r.querySelector(".chart"),i=echarts.init(a),l={tooltip:{trigger:"axis"},xAxis:{type:"time"},yAxis:{type:"value",min:"dataMin",max:"dataMax"},series:[{data:[],type:"line",showSymbol:!1,smooth:!0}]};for(const e of n)l.series[0].data.push([new Date(e.statusTimeMillis),e.sensorValue]);i.setOption(l),t[e][s]=i};(()=>{for(const[e,s]of Object.entries(o)){const o=document.querySelector(`[data-config-key='${e}']`);if(o){t[e]={};for(const[t,n]of Object.entries(s)){const s=o.querySelector(`[data-sensor-key='${t}']`);s&&0!==n.length&&r(e,t,s)}}}const e=exports.currentStatusLogs;for(const t of e)s(t)})();const n=Number.parseInt(document.querySelector("main").dataset.pollingMillis,10);window.setInterval(()=>{cityssm.postJSON(e+"/doGetCurrentStatusLogs",{},e=>{for(const t of e.currentStatusLogs)s(t)})},n)})();