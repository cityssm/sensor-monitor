"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),(()=>{const e={},s=(s,t)=>{let o=!1;if(t||(t=document.querySelector(`[data-config-key='${s.configKey}']`).querySelector(`[data-sensor-key='${s.sensorKey}']`),o=!0),!t)return;const n=t.querySelector(".sensor-status");(e=>{e.classList.remove("has-text-danger","has-text-warning","has-text-success","has-text-grey")})(n),s.isError?n.classList.add("has-text-warning"):s.sensorText?n.classList.add("has-text-danger"):n.classList.add("has-text-success");for(const e of t.querySelectorAll("[data-field='sensorValue']"))e.textContent=s.sensorValue.toString();for(const e of t.querySelectorAll("[data-field='sensorValueMin']"))e.textContent=s.sensorValueMin.toString();for(const e of t.querySelectorAll("[data-field='sensorValueMax']"))e.textContent=s.sensorValueMax.toString();for(const e of t.querySelectorAll("[data-field='sensorText']"))e.textContent=s.sensorText;if(o){const t=e[s.configKey][s.sensorKey],o=t.getOption().series[0].data;for(;o.length>1e4;)o.shift();o.push([new Date(s.statusTimeMillis),s.sensorValue]),t.setOption({series:{data:o}})}},t=exports.historicalStatusLogs,o=(o,n,r)=>{const a=t[o][n],l={configKey:o,sensorKey:n,statusTimeMillis:a[a.length-1].statusTimeMillis,isError:a[a.length-1].isError,sensorValue:a[a.length-1].sensorValue,sensorText:a[a.length-1].sensorText,sensorValueMin:a[a.length-1].sensorValue,sensorValueMax:a[a.length-1].sensorValue},i=r.querySelector(".chart"),u=echarts.init(i),c={tooltip:{trigger:"axis"},xAxis:{type:"time"},yAxis:{type:"value",min:"dataMin",max:"dataMax"},series:[{data:[],type:"line",showSymbol:!1,smooth:!0}]};for(const e of a)l.sensorValueMin=Math.min(l.sensorValueMin,e.sensorValue),l.sensorValueMax=Math.max(l.sensorValueMax,e.sensorValue),c.series[0].data.push([new Date(e.statusTimeMillis),e.sensorValue]);u.setOption(c),e[o][n]=u,s(l,r)};(()=>{for(const[s,n]of Object.entries(t)){const t=document.querySelector(`[data-config-key='${s}']`);if(t){e[s]={};for(const[e,r]of Object.entries(n)){const n=t.querySelector(`[data-sensor-key='${e}']`);n&&0!==r.length&&o(s,e,n)}}}})();const n=Number.parseInt(document.querySelector("main").dataset.pollingMillis,10);window.setInterval(()=>{cityssm.postJSON("/doGetCurrentStatusLogs",{},e=>{for(const t of e.currentStatusLogs)s(t)})},n)})();